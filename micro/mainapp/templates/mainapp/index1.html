{% load static %}
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
    <script type="text/javascript" src="{% static 'update.js' %}"></script>
    <link rel="stylesheet" type="text/css" href="{% static 'style.css' %}">
    <meta charset="UTF-8">
    <title id='title'>Mr.Sensor's Data</title>
</head>
<body>
    <h1 id="tem">Today's temperature : 00.0째C</h1>
    <h1 id="gyro">Rotate : 90째</h1>
    <h1 id="ult">Distancing : 384000Km<br></h1>
    <img id='img'>
    <script>
	    function ajaxcall(){
				    $.ajax({
							        url : 'update',
							        type : 'GET',
							        datatype: 'json',
							        success: function(data){
										                var u = "Distance from the Thing : ";
										                var t = "Today's temperature : ";
										                var g = "Rotate : ";
										                document.getElementById('ult').innerHTML=u+data['ult'] + 'cm';
										                document.getElementById('tem').innerHTML=t+data['tem'] + '째C';
										                document.getElementById('gyro').innerHTML=g+data['gyro'] + '째';
										                if(data['ult']>50){
														                    document.getElementById('title').innerHTML='Elon';
														                    document.getElementById('img').setAttribute('src', 'https://pds.joongang.co.kr/news/component/htmlphoto_mmdata/202104/20/ab7c9cda-2fca-4205-8d10-540f5851823f.jpg');
														                }else{
																		                    document.getElementById('title').innerHTML='Jeffrey';
																		                    document.getElementById('img').setAttribute('src', 'https://i.ytimg.com/vi/zQ9Po9UDqBc/maxresdefault.jpg');
																		                }
										            }
							    });
			}
	    setInterval(ajaxcall, 1000);
    </script>
    {% autoescape off %}
    {% endautoescape %}
</body>
</html>
